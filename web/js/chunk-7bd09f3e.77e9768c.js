(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bd09f3e"],{"0688":function(e,t,a){},"0fd4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TableModel",{attrs:{hasSearch:e.hasSearch,tableConfig:e.tableConfig,table_column:e.table_column,searchUrl:e.searchUrl}})},r=[],o=a("6b0f"),l=a("bc3a"),s=a.n(l),c={data:function(){var e=this;this.$createElement;return{hasSearch:!0,table_column:[{title:"单位名称",align:"center",key:"companyName"},{title:"单位板块",align:"center",key:"panelnameValue"},{title:"服务费收取方式",align:"center",key:"serverTypeValue"},{title:"收费数值",align:"center",key:"serverCost",render:function(e,t){return"2"==t.row.serverType?e("span",[t.row.debtTime,"%"]):"3"==t.row.serverType?e("span",["￥",t.row.serverCost]):e("span",["免费"])}},{title:"出票政策",align:"center",key:"policyTypeValue"},{title:"审批类型",align:"center",key:"approveTypeValue"},{title:"差旅控制方式",width:100,align:"center",key:"travelControlTypeValue"},{title:"是否有效",align:"center",key:"isEnable",render:function(e,t){return t.row.isEnable?e("span",["可用"]):e("span",["不可用"])}},{title:"欠款期限",align:"center",key:"debtTime",render:function(e,t){if(t.row.debtTime||0==t.row.debtTime)return e("span",[t.row.debtTime,"个月"])}},{title:"操作",align:"center",width:150,key:"edit",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.editUrl(a.row.id)}}},"修改"),t("span",["    "]),t("Button",{props:{type:"warning",size:"small"},on:{click:function(){e.confirm(a.row.id)}}},"禁用")])}}],searchUrl:"/api/company/list",tableConfig:{searchUrl:"/api/company/list",searchObj:[{type:"input",name:"companyName",view_name:"单位名称",placeholder:"请输入单位名称"},{type:"select",name:"panelname",showUnselect:!0,view_name:"单位板块",placeholder:"请选择板块",data:53},{type:"select",name:"isEnable",view_name:"是否有效",showUnselect:!0,placeholder:"请选择",data:[{id:"true",name:"有效"},{id:"false",name:"无效"}]}],buttonList:[{num:0,type:"modal",text:"添加公司",url:"/api/company/add",state:"add",component:"CompanyForm"}]}}},methods:{editUrl:function(e){this.$router.push({name:"companyEdit",query:{id:e}})},delMember:function(e){var t=this;s()({method:"POST",url:"/api/company/delete/".concat(e),headers:{userId:this.$store.state.user.userId}}).then(function(e){200==e.data.code&&(t.$Message.info("禁用成功"),t.$store.commit("refreshTable",{curtime:(new Date).getTime()}))})},confirm:function(e){var t=this;this.$Modal.confirm({title:"禁用公司",content:"你确定要禁用该公司么",onOk:function(){t.delMember(e)},onCancel:function(){}})}},components:{TableModel:o["a"]}},i=c,u=(a("b408"),a("2877")),m=Object(u["a"])(i,n,r,!1,null,"36cd8445",null);m.options.__file="company_search.vue";t["default"]=m.exports},1622:function(e,t,a){},"2ff9":function(e,t,a){},"6b0f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchMain"},[e.hasSearch?a("SearchForm",{staticStyle:{"margin-bottom":"15px"},attrs:{searchObj:e.tableConfig.searchObj,companyList:e.companyList,searchUrl:e.tableConfig.searchUrl,searchModel:e.getFormModel()}}):e._e(),e._l(e.tableConfig.buttonList,function(t){return a("Button",{key:t.url,class:0!=t.num?"searchBtnStyle":null,attrs:{type:"primary"},on:{click:function(a){e.addButton(t)}}},[e._v(e._s(t.text))])}),a("ViewTable",{staticStyle:{"margin-top":"15px"},attrs:{table_column:e.table_column,searchUrl:e.searchUrl||e.tableConfig.searchUrl,border:""}})],2)},r=[],o=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{ref:"formSearch",attrs:{model:e.searchModelData,"label-position":"left","label-width":70}},[a("Row",{attrs:{gutter:15}},[e._l(e.searchObj,function(t){return a("Col",{key:t.name,attrs:{span:(t.type,8)}},["input"===t.type?a("FormItem",{attrs:{label:t.view_name,prop:t.name}},[a("Input",{attrs:{placeholder:t.placeholder},model:{value:e.searchModelData[t.name],callback:function(a){e.$set(e.searchModelData,t.name,a)},expression:"searchModelData[item.name]"}})],1):e._e(),"searchBlear"===t.type?a("FormItem",{attrs:{label:t.view_name,prop:t.name}},[a("Input",{staticStyle:{width:"60%"},attrs:{placeholder:t.placeholder},model:{value:e.searchModelData[t.name],callback:function(a){e.$set(e.searchModelData,t.name,a)},expression:"searchModelData[item.name]"}}),a("Checkbox",{staticStyle:{"margin-left":"10px"},model:{value:e.searchModelData[t.blear],callback:function(a){e.$set(e.searchModelData,t.blear,a)},expression:"searchModelData[item.blear]"}},[e._v(e._s(t.blear_name))])],1):e._e(),"checkbox"===t.type?a("FormItem",[a("Checkbox",{model:{value:e.searchModelData[t.name],callback:function(a){e.$set(e.searchModelData,t.name,a)},expression:"searchModelData[item.name]"}},[e._v(e._s(t.view_name))])],1):"select"!==t.type||t.data.length?"select"===t.type&&t.data.length?a("FormItem",{attrs:{label:t.view_name}},[a("Select",{attrs:{placeholder:t.placeholder,filterable:""},model:{value:e.searchModelData[t.name],callback:function(a){e.$set(e.searchModelData,t.name,a)},expression:"searchModelData[item.name]"}},[t.showUnselect?a("Option",{attrs:{value:""}},[e._v("无")]):e._e(),e._l(t.data,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})],2)],1):"companyList"===t.type?a("FormItem",{attrs:{label:t.view_name}},[a("Select",{attrs:{placeholder:t.placeholder,filterable:""},model:{value:e.searchModelData[t.name],callback:function(a){e.$set(e.searchModelData,t.name,a)},expression:"searchModelData[item.name]"}},[t.showUnselect?a("Option",{attrs:{value:""}},[e._v("无")]):e._e(),e._l(e.companyList,function(t){return a("Option",{key:t.id,attrs:{value:t.id+""}},[e._v(e._s(t.companyName))])})],2)],1):e._e():a("FormItem",{attrs:{label:t.view_name}},[a("Select",{attrs:{placeholder:t.placeholder,filterable:""},model:{value:e.searchModelData[t.name],callback:function(a){e.$set(e.searchModelData,t.name,a)},expression:"searchModelData[item.name]"}},[t.showUnselect?a("Option",{attrs:{value:""}},[e._v("无")]):e._e(),e._l(e.getterGroup(t.data),function(t){return a("Option",{key:t.dKey,attrs:{value:t.dKey}},[e._v(e._s(t.dValue))])})],2)],1)],1)}),a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.getTableData()}}},[e._v("查询")]),a("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"warning",icon:"ios-refresh"},on:{click:function(t){e.resetForm()}}},[e._v("重置")])],1)],2)],1)}),l=[],s=a("be94"),c=a("2f62"),i={props:["searchObj","searchModel","searchUrl","companyList"],data:function(){return{searchModelData:this.searchModel}},methods:{getTableData:function(){this.$store.commit("setSearchData",{searchData:this.searchModelData,searchUrl:this.searchUrl,curtime:(new Date).getTime()})},resetForm:function(){var e={};this.searchObj.map(function(t){console.log(t.name),e[t.name]=void 0}),this.searchModelData=e}},computed:Object(s["a"])({},Object(c["c"])(["getterGroup"]))},u=i,m=(a("b40a"),a("2877")),h=Object(m["a"])(u,o,l,!1,null,"433377f0",null);h.options.__file="search_form.vue";var p=h.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{staticStyle:{"margin-top":"15px"},attrs:{border:"",columns:e.table_column,data:e.table_data}}),e.dataTotal-e.pageSize>0?a("Page",{attrs:{total:e.dataTotal,"page-size":e.pageSize,"show-total":""},on:{"on-change":e.changepage}}):e._e()],1)},f=[],b=(a("96cf"),a("1da1")),y=a("7e1e"),v=function(e){return e<10?"0"+e:e},g={props:["table_column","table_column","searchUrl"],data:function(){return{dataTotal:100,pageSize:10,curPage:0,table_data:[{code:"10281121",type:"0",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"}]}},computed:{getSearchData:function(){return this.$store.state.table.curtime}},methods:{getDate:function(e){var t=new Date(e),a=t.getFullYear(),n=v(t.getMonth()+1),r=v(t.getDate()),o=(v(t.getHours()),v(t.getMinutes()),v(t.getSeconds()),a+"-"+n+"-"+r);return o},composeUrl:function(e,t){for(var a in e.indexOf("?")<0&&t&&(e+="?"),t)(t[a]||0===t[a])&&(e+="".concat(a,"=").concat(t[a],"&"));return"?"===e.substr(e.length-1,1)&&(e=e.substr(0,e.length-1)),"&"===e.substr(e.length-1,1)&&(e=e.substr(0,e.length-1)),e},filters:function(e){var t=this;return e.length<=0?[]:(e[0].hasOwnProperty("gender")&&e.map(function(e,t){return 1==e["gender"]?e["gender"]="男":e["gender"]="女",e}),e[0].hasOwnProperty("startDate")&&e.map(function(e,a){return e["startDate"]=t.getDate(e["startDate"]),e}),e[0].hasOwnProperty("endDate")&&e.map(function(e,a){return e["endDate"]=t.getDate(e["endDate"]),e}),e)},changepage:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this.$store.state.table,n="/memberList"===this.$route.path||"/companyEdit"===this.$route.path?this.composeUrl(this.searchUrl,a.searchData):this.searchUrl,n.indexOf("?")<0&&(n+="?"),t=--t,n+="page=".concat(t),this.refreshTable(n),this.$store.commit("setPgae",t);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshTable:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["c"])(t,this.$store.state.user.token).then(function(e){if(!e.data.data)return!1;var t=n.filters(e.data.data.list);return e.data.data.list=t,e});case 2:if(a=e.sent,a){e.next=6;break}return this.$Message.error("服务器报错"),e.abrupt("return",!1);case 6:console.log(a.data.data.list),this.table_data=a.data.data.list,this.pageSize=10,this.dataTotal=a.data.data.totalCount;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},mounted:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.searchUrl,this.refreshTable(t);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:{getSearchData:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$store.state.table,console.log(this.$route.path),a="/memberList"==this.$route.path||"/companyList"==this.$route.path?this.composeUrl(this.searchUrl,t.searchData):this.searchUrl,this.$store.commit("setPgae",0),this.refreshTable(a);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},_=g,w=(a("f9a9"),Object(m["a"])(_,d,f,!1,null,"d3332f44",null));w.options.__file="view_table.vue";var k=w.exports,D={props:["tableConfig","table_column","searchUrl","hasSearch","companyList"],data:function(){return{}},methods:{getFormModel:function(){var e=this.tableConfig.searchObj,t=(e.length,{});return e.map(function(e,a){"input"===e.type?t[e.name]="":"select"===e.type&&(t[e.name]="")}),t},addButton:function(e){e.curtime=(new Date).getTime(),e.status=!0,"modal"===e.type&&this.$store.commit("modalStatus",e)}},components:{SearchForm:p,ViewTable:k}},M=D,x=(a("fb21"),Object(m["a"])(M,n,r,!1,null,"73ad6f84",null));x.options.__file="table_model.vue";t["a"]=x.exports},"850d":function(e,t,a){},b408:function(e,t,a){"use strict";var n=a("850d"),r=a.n(n);r.a},b40a:function(e,t,a){"use strict";var n=a("0688"),r=a.n(n);r.a},f9a9:function(e,t,a){"use strict";var n=a("2ff9"),r=a.n(n);r.a},fb21:function(e,t,a){"use strict";var n=a("1622"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-7bd09f3e.77e9768c.js.map