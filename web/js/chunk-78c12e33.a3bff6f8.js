(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78c12e33"],{"0635":function(e,t,a){"use strict";var n=a("cbb2"),r=a.n(n);r.a},3620:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TableModel",{attrs:{hasSearch:e.hasSearch,tableConfig:e.tableConfig,table_column:e.table_column,searchUrl:e.searchUrl}})},r=[],o=a("be94"),c=a("2f62"),l=a("6b0f"),i=a("bc3a"),s=a.n(i),u={data:function(){var e=this;this.$createElement;return{hasSearch:!0,table_column:[{title:"卡号",align:"center",width:118,key:"cardNum"},{title:"类型",align:"center",width:118,key:"memberTypeValue"},{title:"姓名",align:"center",width:118,key:"realName"},{title:"所属单位",align:"center",width:118,key:"companyIdValue"},{title:"手机号码",align:"center",width:118,key:"cellPhone"},{title:"性别",align:"center",width:118,key:"gender"},{title:"职务",align:"center",width:118,key:"positionValue"},{title:"行政级别",align:"center",width:118,key:"administrativeLevelValue"},{title:"修改",align:"center",width:202,key:"edit",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.editUrl(a.row.cardNum)}}},"修改"),t("span",["    "]),t("Button",{props:{type:"warning",size:"small"},on:{click:function(){e.confirm(a.row.cardNum)}}},"禁用")])}}],searchUrl:"/api/member/list",tableConfig:{searchUrl:"/api/member/list",searchObj:[{type:"input",name:"cardNum",view_name:"会员卡号",placeholder:"请输入会员卡号"},{type:"select",name:"memberType",view_name:"会员类型",placeholder:"请选择会员类型",data:[{id:1,name:"有效"},{id:0,name:"无效"}]},{type:"input",name:"realName",view_name:"会员姓名",placeholder:"请输入会员姓名"},{type:"input",name:"companyId",view_name:"所属单位",placeholder:"请输入会员姓名"},{type:"input",name:"cellPhone",view_name:"手机号码",placeholder:"请输入手机号码"},{type:"input",name:"paperNum",view_name:"证件号码",placeholder:"请输入证件号码"},{type:"select",name:"administrativeLevel",view_name:"行政级别",placeholder:"请选择行政级别",data:[{id:1,name:"有效"},{id:0,name:"无效"}]},{type:"select",name:"isVip",view_name:"是否VIP",placeholder:"请选择",data:[{id:1,name:"是vip"},{id:0,name:"不是vip"}]},{type:"select",name:"isEnable",view_name:"是否有效",placeholder:"请选择",data:[{id:1,name:"有效"},{id:0,name:"无效"}]}],buttonList:[{num:0,type:"modal",text:"新建会员",url:"/api/company/add",state:"add",component:"MemberForm"}]}}},computed:Object(o["a"])({},Object(c["c"])(["getterGroup"])),methods:{editUrl:function(e){this.$router.push({name:"memberEdit",query:{id:e}})},delMember:function(e){var t=this;s()({method:"POST",url:"/api/member/delete/".concat(e),headers:{userId:this.$store.state.user.userId}}).then(function(e){200==e.data.code&&(t.$Message.info("禁用成功"),t.$store.commit("refreshTable",{curtime:(new Date).getTime()}))})},confirm:function(e){var t=this;this.$Modal.confirm({title:"删除会员",content:"你确定要删除此证件么",onOk:function(){t.delMember(e)},onCancel:function(){t.$Message.info("Clicked cancel")}})},changeProperty:function(e){return e.map(function(e,t){e.name=e.dValue}),e}},mounted:function(){var e=this.getterGroup(7);this.tableConfig.searchObj[1]["data"]=this.changeProperty(e);var t=this.getterGroup(31);this.tableConfig.searchObj[6]["data"]=this.changeProperty(t)},components:{TableModel:l["a"]}},m=u,h=(a("0635"),a("2877")),d=Object(h["a"])(m,n,r,!1,null,"57df6d0c",null);d.options.__file="memberList.vue";t["default"]=d.exports},3716:function(e,t,a){"use strict";var n=a("9516"),r=a.n(n);r.a},"37dc":function(e,t,a){"use strict";var n=a("4c27"),r=a.n(n);r.a},"4c27":function(e,t,a){},"6b0f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchMain"},[e.hasSearch?a("SearchForm",{staticStyle:{"margin-bottom":"15px"},attrs:{searchObj:e.tableConfig.searchObj,searchUrl:e.tableConfig.searchUrl,searchModel:e.getFormModel()}}):e._e(),e._l(e.tableConfig.buttonList,function(t){return a("Button",{key:t.url,class:0!=t.num?"searchBtnStyle":null,attrs:{type:"primary"},on:{click:function(a){e.addButton(t)}}},[e._v(e._s(t.text))])}),a("ViewTable",{staticStyle:{"margin-top":"15px"},attrs:{table_column:e.table_column,searchUrl:e.searchUrl,border:""}})],2)},r=[],o=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{attrs:{model:e.searchModel,"label-position":"left","label-width":70}},[a("Row",{attrs:{gutter:15}},[e._l(e.searchObj,function(t){return a("Col",{key:t.name,attrs:{span:"6"}},["input"===t.type?a("FormItem",{attrs:{label:t.view_name}},[a("Input",{attrs:{placeholder:t.placeholder},model:{value:e.searchModel[t.name],callback:function(a){e.$set(e.searchModel,t.name,a)},expression:"searchModel[item.name]"}})],1):"select"===t.type?a("FormItem",{attrs:{label:t.view_name}},[a("Select",{attrs:{placeholder:t.placeholder,filterable:""},model:{value:e.searchModel[t.name],callback:function(a){e.$set(e.searchModel,t.name,a)},expression:"searchModel[item.name]"}},e._l(t.data,function(t){return a("Option",{key:t.name,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1):e._e()],1)}),a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.getTableData()}}},[e._v("查询")])],1)],2)],1)}),c=[],l={props:["searchObj","searchModel","searchUrl"],data:function(){return{}},methods:{getTableData:function(){this.$store.commit("setSearchData",{searchData:this.searchModel,searchUrl:this.searchUrl,curtime:(new Date).getTime()})}},computed:{}},i=l,s=(a("37dc"),a("2877")),u=Object(s["a"])(i,o,c,!1,null,"ae40463e",null);u.options.__file="search_form.vue";var m=u.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{staticStyle:{"margin-top":"15px"},attrs:{border:"",columns:e.table_column,data:e.table_data}}),a("Page",{attrs:{total:e.dataTotal,"page-size":e.pageSize,"show-total":""},on:{"on-change":e.changepage}})],1)},d=[],p=(a("96cf"),a("1da1")),f=(a("28a5"),a("7e1e")),b={props:["table_column","table_column","searchUrl"],data:function(){return{dataTotal:100,pageSize:10,curPage:0,table_data:[{code:"10281121",type:"0",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"},{code:"10281121",type:"1",name:"李小明",company:"阳光集团酒店公司",tel:"15712922312",sex:"男",work:"测试职务1",level:"副科级",total:"0"}]}},computed:{getSearchData:function(){return this.$store.state.table.curtime}},methods:{composeUrl:function(e,t){for(var a in e.indexOf("?")<0&&t&&(e+="?"),t)(t[a]||0===t[a])&&(e+="".concat(a,"=").concat(t[a],"&"));return"?"===e.charAt(e.length-1)&&(e=e.split("?")[0]),e},filters:function(e){return e.length<=0?[]:(e[0].hasOwnProperty("gender")&&e.map(function(e,t){return 1==e["gender"]?e["gender"]="男":e["gender"]="女",e}),e)},changepage:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this.$store.state.table,n=this.composeUrl(this.searchUrl,a.searchData),n.indexOf("?")<0&&(n+="?"),t=--t,n+="page=".concat(t),this.refreshTable(n),this.$store.commit("setPgae",t);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshTable:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(t){var a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["c"])(t,this.$store.state.user.token).then(function(e){var t=n.filters(e.data.data.list);return e.data.data.list=t,e});case 2:a=e.sent,this.table_data=a.data.data.list,this.pageSize=a.data.data.list.length||10,this.dataTotal=a.data.data.totalCount;case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},mounted:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.searchUrl,this.refreshTable(t);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:{getSearchData:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$store.state.table,a=this.composeUrl(this.searchUrl,t.searchData),a===this.$store.state.table.curUrl){e.next=4;break}return e.abrupt("return",!1);case 4:this.$store.commit("setPgae",0),this.refreshTable(a);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},v=b,g=(a("7d65"),Object(s["a"])(v,h,d,!1,null,"8e08f4e2",null));g.options.__file="view_table.vue";var y=g.exports,w={props:["tableConfig","table_column","searchUrl","hasSearch"],data:function(){return{}},methods:{getFormModel:function(){var e=this.tableConfig.searchObj,t=(e.length,{});return e.map(function(e,a){"input"===e.type?t[e.name]="":"select"===e.type&&(t[e.name]="")}),t},addButton:function(e){e.curtime=(new Date).getTime(),e.status=!0,"modal"===e.type&&this.$store.commit("modalStatus",e)}},components:{SearchForm:m,ViewTable:y}},_=w,k=(a("3716"),Object(s["a"])(_,n,r,!1,null,"5163d6ce",null));k.options.__file="table_model.vue";t["a"]=k.exports},"7d65":function(e,t,a){"use strict";var n=a("d64c"),r=a.n(n);r.a},9516:function(e,t,a){},cbb2:function(e,t,a){},d64c:function(e,t,a){}}]);
//# sourceMappingURL=chunk-78c12e33.a3bff6f8.js.map